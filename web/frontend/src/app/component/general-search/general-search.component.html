<div class="container" style="padding-top:15px;">
  <div class="row">
    
    <div class="col-12 p-0">
      <div class="shared-logo-box">
      <div class="row" >
        <div class="col-sm-4">           
             <div style="padding-top: 2px;">
              <p-autoComplete [style]="{'width':'100%'}" [inputStyle]="{'width':'100%'}"  [delay]="600"
                [(ngModel)]="termautosearch" [suggestions]="textSuggestions" (onClear)="clearResults()"
                (completeMethod)="search($event)" id="termauto" name="termauto"
                placeholder="Enter concept code or at least 3 letters of a term." [minLength]="3">
              </p-autoComplete>
            
             </div>        
       
        </div>
         <div class="col-sm-2 p-0">           
             <div class="ui-inputgroup" style="padding-top: 2px;">
              <button type="button" pButton label="search" icon="fa fa-search" (click)="returnSearchResults();"></button>            
              
             </div>        
       
        </div>  

        <div class="col-sm-2 p-0">
           <div class="ui-inputgroup" style="padding-top: 2px;float:left;">
              <p-multiSelect autoWidth="false" [showToggleAll]="false" dropdownIcon="pi pi-caret-down"
                [options]="sourcesAll" [(ngModel)]="selectedSource"
                name="sourceSearch" defaultLabel="Source"
                (onChange)="onChangeSource($event)" [displaySelectedLabel]="false">
                <ng-template let-source let-i="index" pTemplate="item">
                  <span style="vertical-align: bottom;">{{source.label}}</span>
                </ng-template>
              </p-multiSelect>
              <button type="button" pButton icon="fa fa-undo" (click)="resetSource();" pTooltip="Reset"
                label="reset" tooltipPosition="bottom"></button>
            </div>
            
          
              
        </div>
         <div class="col-sm-4 p-0">
           <div style="padding-top: 2px;float:left;">
          <button type="button" pButton icon="fa fa-undo"
              (click)="clearSearchText($event); resetFilters($event); resetTable();" pTooltip="reset"
              label="reset search" tooltipPosition="bottom"></button>
              </div>
              </div>
     </div>
      <div class="row">
         <div class="col-sm-6" style="padding-top:2px;">
            <p-radioButton class="radio-padding" name="searchtype" value="contains" label="Contains"
              [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('contains')"></p-radioButton>
            <p-radioButton class="radio-padding" name="searchtype" value="match" label="Exact Match"
              [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('match')"></p-radioButton>
            <p-radioButton class="radio-padding" name="searchtype" value="startswith" label="Starts With"
              [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('startswith')"></p-radioButton>
            <p-button icon="pi pi-angle-double-right" (onClick)="showMoreSearchOptions()" *ngIf="!showMoreSearchOption">
            </p-button><span *ngIf="showMoreSearchOption">
              <p-radioButton class="radio-padding" name="searchtype" value="phrase" label="Phrase"
                [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('phrase')"></p-radioButton>
              <p-radioButton class="radio-padding" name="searchtype" value="fuzzy" label="Fuzzy"
                [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('fuzzy')"></p-radioButton>
              <p-radioButton class="radio-padding" name="searchtype" value="AND" label="AND"
                [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('AND')"></p-radioButton>
              <p-radioButton class="radio-padding" name="searchtype" value="OR" label="OR"
                [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('OR')"></p-radioButton>
            </span>
            <p-button icon="pi pi-angle-double-left" (onClick)="showMoreSearchOptions()" *ngIf="showMoreSearchOption">
            </p-button>

        
        </div>
         <div class="col-sm-6 p-0" style="padding-top:2px;">
            <p-chips (keydown)="onChipsKeyEvent($event)" *ngIf="selectedSource.length > 0"
              [(ngModel)]="selectedSource" (onRemove)="onSourceSelectDeselect($event)"
              addOnTab="false" addOnBlur="false">
              <ng-template let-item pTemplate="item">
                {{item}}
              </ng-template>
            </p-chips>
         </div>
      </div>
     </div>
      <!--
      <p-panel>
       <p-header>
          <div>
            <span class="ui-panel-title">Term Browser Search</span>         
          </div>
        </p-header>
        <div class="row" style="padding-top:15px;">

          <div class="col-sm-5">
            <span>
              <p-autoComplete [style]="{'width':'100%'}" [inputStyle]="{'width':'100%'}" [delay]="600"
                [(ngModel)]="termautosearch" [suggestions]="textSuggestions" (onClear)="clearResults()"
                (completeMethod)="search($event)" id="termauto" name="termauto"
                placeholder="Hint: Enter a concept code or at least 3 letters of a term. e.g. bre" [minLength]="3">
              </p-autoComplete>


            </span>

          </div>
          <div class="col-sm-1"><button type="button" pButton label="Search" icon="fa fa-search"
              (click)="returnSearchResults();"></button></div>
          <div class="col-sm-6">

           
            <button style="float:left" type="button" pButton icon="fa fa-undo"
              (click)="clearSearchText($event); resetFilters($event); resetTable();" pTooltip="Reset"
              label="Reset Search" tooltipPosition="bottom"></button>
          </div>


        </div>
        <div class="row">


          <div class="col-sm-12" style="padding-top:10px;">
            <p-radioButton class="radio-padding" name="searchtype" value="contains" label="Contains"
              [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('contains')"></p-radioButton>
            <p-radioButton class="radio-padding" name="searchtype" value="match" label="Exact Match"
              [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('match')"></p-radioButton>
            <p-radioButton class="radio-padding" name="searchtype" value="startswith" label="Starts With"
              [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('startswith')"></p-radioButton>
            <p-button icon="pi pi-angle-double-right" (onClick)="showMoreSearchOptions()" *ngIf="!showMoreSearchOption">
            </p-button><span *ngIf="showMoreSearchOption">
              <p-radioButton class="radio-padding" name="searchtype" value="phrase" label="Phrase"
                [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('phrase')"></p-radioButton>
              <p-radioButton class="radio-padding" name="searchtype" value="fuzzy" label="Fuzzy"
                [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('fuzzy')"></p-radioButton>
              <p-radioButton class="radio-padding" name="searchtype" value="AND" label="AND"
                [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('AND')"></p-radioButton>
              <p-radioButton class="radio-padding" name="searchtype" value="OR" label="OR"
                [(ngModel)]="selectedSearchType" (onClick)="OnChangeSearchType('OR')"></p-radioButton>
            </span>
            <p-button icon="pi pi-angle-double-left" (onClick)="showMoreSearchOptions()" *ngIf="showMoreSearchOption">
            </p-button>


          </div>


        </div>
        <hr />
        <div class="row">

          <div class="col-sm-4">
            <div class="ui-inputgroup">
              <p-multiSelect autoWidth="false" [showToggleAll]="false" dropdownIcon="pi pi-caret-down"
                [options]="sourcesAll" [(ngModel)]="selectedSource"
                name="sourceSearch" defaultLabel="Select a Source"
                (onChange)="onChangeSource($event)" [displaySelectedLabel]="false">
                <ng-template let-source let-i="index" pTemplate="item">
                  <span style="vertical-align: bottom;">{{source.label}}</span>
                </ng-template>
              </p-multiSelect>
              <button type="button" pButton icon="fa fa-undo" (click)="resetSource();" pTooltip="Reset"
                label="Reset" tooltipPosition="bottom"></button>
            </div>
          </div>
         

        </div>
        <div class="row" style="padding-top:5px;">
          <div class="col-sm-4">

            <p-chips (keydown)="onChipsKeyEvent($event)" *ngIf="selectedSource.length > 0"
              [(ngModel)]="selectedSource" (onRemove)="onSourceSelectDeselect($event)"
              addOnTab="false" addOnBlur="false">
              <ng-template let-item pTemplate="item">
                {{item}}
              </ng-template>
            </p-chips>
          </div>
         

        </div>
      
      </p-panel>-->
    </div>
  </div>
 

  <div class="row">

    <div class="col-sm-12 p-0">
      <div class="row">
        <div class="col-sm-12">
          <p-toolbar styleClass="custom-toolbar">
          
              <span *ngIf="noMatchedConcepts">
                <i class="fa fa-info-circle"></i>&nbsp;&nbsp;No concepts found that matched the above criteria.
              </span>
              <span *ngIf="loadedMultipleConcept">
                <i class="fa fa-info-circle"></i>&nbsp;&nbsp;{{title}}
              </span>
            
            
          </p-toolbar>
        </div>
      </div>
    

      <div *ngIf="displayTableFormat  && !noMatchedConcepts">
        <div class="row" style="margin-bottom:10px;padding-top:5px;">
          <div class="col-sm-12">

            <p-table #dtSearch [loading]="loading" loadingIcon="fa fa-spinner" [columns]="cols" [value]="reportData"
              [paginator]="true" [rowsPerPageOptions]="[10, 20, 50, 100, 200]" pageLinkSize="3"
              [rows]="defaultTableRows" [scrollable]="true" dataKey="column1" [reorderableColumns]="true"
              [totalRecords]="hitsFound" paginatorPosition="both" [lazy]="true" (onLazyLoad)="onLazyLoadData($event)"
              >

             <!-- <ng-template pTemplate="caption">
                <div class="ui-helper-clearfix">
                  <button type="button" pButton icon="fa fa-file-o" iconPos="left" label="Export Data"
                    (click)="dtSearch.exportCSV()" style="float:right;"></button>&nbsp;

                </div>
              </ng-template>-->
              <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                    <col style="width: 1.8em">
                    <col *ngFor="let col of columns" [style.width]="col.width">
                </colgroup>
              </ng-template>
              <ng-template pTemplate="header" let-columns>
                <tr>
                  <th style="width: 1.8em"></th>
                  <th *ngFor="let col of columns" >
                    {{col.header}}

                  </th>
                </tr>

              </ng-template>
              <ng-template pTemplate="body" let-rowData let-columns="columns">

                <tr [pSelectableRow]="rowData">
                  <td style="width: 1.8em">
                    <a href="#" [pRowToggler]="rowData">
                      <i [ngClass]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></i>
                    </a>
                  </td>
                  <td *ngFor="let col of columns;let idx=index" [ngSwitch]="col.header">
                    <span *ngSwitchCase="'Code'">
                      <a target="_blank" *ngIf="rowData.retiredConcept === 'no'"
                        [routerLink]="['/concept/', rowData['column1'] ]"><i class="fa fa-external-link"></i> &nbsp;
                        {{rowData[col.field]}} </a>
                      <a target="_blank" *ngIf="rowData.retiredConcept === 'yes'"
                        [routerLink]="['/concept/', rowData['column1'] ]"><i class="fa fa-external-link"></i> &nbsp;
                        {{rowData[col.field]}} (Retired Concept) </a>
                    </span>
                   <!-- <span *ngSwitchCase="'Label'"><a href="javascript:void(0)"
                        (click)="onSelectConceptCode(rowData['column1'])">{{rowData[col.field]}}</a></span>-->
                    <!--  <div *ngSwitchCase="'Maps_To'" [innerHTML]="rowData[col.field] | transformDisplay:'Maps_To'"></div>-->                    
                    <span *ngSwitchDefault [innerHTML]="rowData[col.field]"></span>
                  </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="rowexpansion" let-rowData let-columns="columns">
                <tr>
                  <td [attr.colspan]="columns.length + 1">
                    <div class="col-md-12 text-justify">
                      <span class="text-justify" [innerHTML]="rowData.highlight"></span>
                    </div>
                  </td>
                </tr>
              </ng-template>
              <ng-template pTemplate="paginatorright" let-state style="padding-top:4em;">
                <div class="paginator-stats">Showing {{state.first + 1}} to
                  {{(state.first + state.rows) > state.totalRecords?state.totalRecords:state.first + state.rows}} of
                  {{state.totalRecords}}</div>
              </ng-template>
            </p-table>

          </div>
        </div>
      </div>

    </div>

  </div>
</div>